<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html decorator="none" xmlns:v-bind="http://www.w3.org/1999/xhtml" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <base href="<%=basePath%>">

    <title>后台定时任务管理系统</title>

    <meta charset="utf-8">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="This is my page">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    　　<!-- 引入样式 -->
    <link href="/element-ui/lib/theme-default/index.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/common.css">
    <style type="text/css">
        .ff {
            color: white;
        }

        .tips {
            color: red;
        }

        .tips_black {
            color: black;
        }

    </style>
    <style type="text/css">
        .content-bd {
            position: relative;
            width: 100%;
        }

        .page {
            background-color: #fff;
        }

        .page .login-panel1 {
            background-color: rgba(0, 74, 141, 0.8);
            border: 1px solid #007bbb;
            background-image: url("/img/login-bg.jpg");
            border-radius: 4px;
            box-shadow: 1px 1px 4px rgba(255, 255, 255, 0.9);
            box-sizing: border-box;
            display: block;
            height: 350px;
            margin: auto;
            position: absolute;
            right: 20%;
            top: 51px;
            width: 300px;
            z-index: 1000;
        }

        h2 {
            margin-bottom: 1px;
            height: 55px;
        }

        .bottom-line {
            border-bottom: 1px solid #005285;
            padding: 0 20px;
        }

        .btn, .btn:hover, .login-formbg {
            background: none repeat scroll 0 0 transparent;
            border: 0 solid;
            color: #fff;
        }

        .loginName {

        }

        .form-horizontal {
            padding: 20px;
            border-top: 1px solid #0092ae;
        }

        .form-horizontal .form-actions, .form-horizontal :first-child.controls, .form-horizontal .controls {
            padding-left: 60px;
        }

        .form-horizontal .medium-margin {
            margin-bottom: 39px;
            *margin-bottom: 25px;
        }

        .form-horizontal .mini-margin {
            margin-bottom: 20px;
            *margin-bottom: 15px;
        }

        .form-horizontal .checkbox {
            color: #fff;
        }

        legend + .control-group {
            margin-top: -2px;
            *margin-top: -40px;
        }

        .page .page-header, .page .page-footer {
            border: 0;
        }

        .logo {
            margin-left: 10%
        }

        .container {
            display: block;
            overflow: hidden;
            position: relative;
        }

        .container .login-bgda {
            height: 530px;
            overflow: hidden;
        }

        .login-bgda img {
            max-width: none;
        }

        .page-header .row .span8 {
            min-height: 10px;
        }

        .page-header {
            position: relative;
        }

        h4 {
            color: #fff;
            margin: 0;
        }

        .input-medium {
            width: 170px;
        }

        .link {
            color: #fff;
        }

        .btn {
            margin: 0 32px;
        }

        /*为实现图片剧中两边根据屏幕大小折叠效果*/
        .container {
            width: 100%;
        }

        /*容器元素，宽度与浏览器宽度一致*/
        .container .login-bgda {
            padding-left: 50%;
        }

        /*添加的父元素显示内容已50%起*/
        .login-bgda img {
            margin-left: -500px;
        }

        /*已元素本身的一半负值抵消夫元素50%使内容剧中显示*/

    </style>
    <style lang="scss" scoped>

        .content {
            border-left: 1px solid #cccccc;
            margin-left: 0;
            padding-left: 9px;
            padding-top: 10px;
        }
    </style>
</head>

<body class="page page-hybird">
<div class="page-header">
    <div class="container">
        <img class="logo" src="/img/logo.png">
    </div>
</div>
<!-- Login-yc ================================================== -->

<div class="content">
    <div class="content-bd" id="login">
        <div class="login-panel1" style="border:none;">
            <form id="login-form" style="border:none;margin-top:77px;" name="login-form" class="form form-horizontal">
                <fieldset>
                    <div class=" medium-margin">
                        <div class="controls" style="border:none;">
                            <input tabindex="1" class="input input-medium "
                                   style="height:25px;width:196px;margin-left:-20px;margin-top: -3px;color:black;border: 0 solid;"
                                   title="输入用户名称" id="loginName" type="text" v-model="userName">
                        </div>
                    </div>
                    <div class=" mini-margin">
                        <div class="controls">
                            <input tabindex="2" class="input input-medium "
                                   style="color:black;height:25px;width:196px;margin-left:-20px;margin-top: -5px;border: 0 solid;"
                                   title="输入密码" id="loginPassword" type="password" v-model="password">
                        </div>
                    </div>
                    <div class=" mini-margin" style="padding-top: 7px">
                        <div class="controls">
                            <input tabindex="3" class="input input-medium2 "
                                   style="color:black;height:25px;width:65px;margin-left:-20px;margin-top: -5px;color:black;border: 0 solid;"
                                   title="输入验证码" id="randcode" type="text" v-model="randcode">
                            <span class="change">&nbsp;&nbsp;&nbsp;<img v-bind:src='yz' class="img1"
                                                                        border=0 title="点击刷新" style="cursor: pointer;"
                                                                        v-on:click="chk_image"/>
									<font color='#000000'>点图刷新</font>
								   </span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button id="login-btn" class="btn span1" style="margin-top: -5px;"
                                hidefocus="true" v-on:click.stop.prevent="handleSubmit2">
                            <h4 id="login-font">登 录</h4>
                            <img id="loading-btn" style="display: none" src="/img/loading.gif"/>
                        </button>
                    </div>
                </fieldset>
                <div class="control-group mini-margin" style="position: absolute;margin-bottom: 0;bottom: 0">
                    <div class="controls">
                        <label class="checkbox " style="background-color: #FFFFFF;color:black;">
                            <input v-model="checked" checked type="checkbox"> 记住用户名
                        </label>
                    </div>
                </div>
            </form>
        </div>
        <div class="page-content">

            <div class="container">
                <div class="login-bgda">
                    <img src="/img/logo-dbg.jpg">
                </div>
            </div>
        </div>

    </div>
</div>
<div style="margin-top:0px; position:relative;">
    <div><a href="https://www.yooliafc.com" style="TEXT-DECORATION:none;" target="_blank">系统支持：在路上工作室</a> <br>
    </div>
</div>
</body>
<!-- 先引入 Vue -->
<script src="/js/vue.min.js"></script>
<!-- 引入组件库 -->
<script src="/element-ui/lib/index.js"></script>
<script src="/js/axios.min.js"></script>
<script>
    window.onload = function () {
        var v1 = new Vue({
            el: '#login',
            data: {
                userName: '',
                password: '',
                randcode: '',
                checked: true,
                yz: '/yzimage'
            },
            methods: {
                chk_image: function () {
                    this.yz = "/yzimage?" + Math.random();
                },
                getCookie: function (name) {
                    var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
                    if (arr = document.cookie.match(reg))
                        return (arr[2]);
                    else
                        return null;
                },
                setCookie: function (c_name, value, expiredays) {
                    var exdate = new Date();
                    exdate.setDate(exdate.getDate() + expiredays);
                    document.cookie = c_name + "=" + escape(value) + ((expiredays == null) ? "" : ";expires=" + exdate.toGMTString());
                },
                delCookie: function (name) {
                    var exp = new Date();
                    exp.setTime(exp.getTime() - 1);
                    var cval = v1.getCookie(name);
                    if (cval != null)
                        document.cookie = name + "=" + cval + ";expires=" + exp.toGMTString();
                },
                handleSubmit2: function () {
                    var _this = this;
                    var checked = this.checked;
                    if (checked) {
                        let expireDays = 1000 * 60 * 60;
                        var userName = this.userName;
                        v1.setCookie("userName", userName, expireDays);
                    } else {
                        if (v1.getCookie("userName")) {
                            v1.delCookie("userName");
                        }
                    }
                    var loginParams = {userName: this.userName, password: this.password, randcode: this.randcode};
                    axios.post(`/login`, loginParams).then(function (response) {
                        var data=response.data.data;
                        var status=response.data.status;
                        var msg=response.data.msg;
                        if (status === 0) {
                            sessionStorage.setItem('user', JSON.stringify(data));
                            location.href = '/index';
                        } else {
                            v1.$message({
                                showClose: true,
                                message: msg,
                                type: 'error'
                            });
                        }
                    }).catch(function (error) {
                        console.log(error);
                    });
                }
            }
        })
        var userName = v1.getCookie("userName");
        v1.userName = userName || '';
    }

</script>
</html>
